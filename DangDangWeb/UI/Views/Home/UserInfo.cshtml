@model Model.UserInfo
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <title>注册</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="~/content/layui/css/layui.css" rel="stylesheet" />
    <script src="~/js/jquery-1.7.1.min.js"></script>
    <script src="~/js/jquery.unobtrusive-ajax.min.js"></script>
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
    <script type="text/javascript">
        $(function () {
            $("#back").click(function () {
                window.location.href = "/Home/MainIndex";
            })
        })

        function afterSuccess(data) {
            if (data == "1") {
                alert("恭喜您注册成功！")
                window.location.href = "/Home/Index";
            } else if (data == "2") {
                alert("注册失败请稍后重试")
            } else {

                alert("系统繁忙请稍后重试")
            }
        };


    </script>
</head>
<body>

    <blockquote class="layui-elem-quote layui-text">
        <h2>用户基本资料</h2>
    </blockquote>
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
        <legend>资料显示</legend>
    </fieldset>
    @using (Ajax.BeginForm("", new { }, new AjaxOptions() { HttpMethod = "post", OnSuccess = "afterSuccess" }, new { @class = "layui-form" }))
    { 
        <div class="layui-form-item">
            <label class="layui-form-label">用户名</label>
            <div class="layui-input-block">
                <input type="text" name="name" id="name" lay-verify="title" value="@Model.Name" autocomplete="off" placeholder="请输入姓名" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">年龄</label>
            <div class="layui-input-inline">
                <input type="text" name="age" id="age" value="@Model.Age" lay-verify="required" placeholder="请输入年龄" autocomplete="off" class="layui-input">
            </div>
        </div>
  
        <div class="layui-form-item">
            <label class="layui-form-label">单选框</label>
            <div class="layui-input-block">
                @{
        if (Model.Sex == "男")
        {
             <input type="radio" name="sex" value="男" title="男" checked="">
                <input type="radio" name="sex" value="女" title="女">
        }
        else
        {
             <input type="radio" name="sex" value="男" title="男" >
             <input type="radio" name="sex" value="女" title="女" checked="">
        }
                    }
            
                <input type="radio" name="sex" value="禁" title="禁用" disabled="">
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">手机号</label>
                <div class="layui-input-inline">
                    <input type="tel" name="phone" value="@Model.Photo" lay-verify="required|phone" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-inline">
                <label class="layui-form-label">邮箱</label>
                <div class="layui-input-inline">
                    <input type="text" name="email" value="@Model.Email" lay-verify="email" autocomplete="off" class="layui-input">
                </div>
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">密码</label>
            <div class="layui-input-inline">
                <input type="password" name="password" value="@Model.PassWord" lay-verify="pass" placeholder="请输入密码" autocomplete="off" class="layui-input">
            </div>
            <div class="layui-form-mid layui-word-aux">请填写6到12位密码</div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">家庭地址</label>
            <div class="layui-input-block">
                <input type="text" name="address" value="@Model.Address" lay-verify="address" autocomplete="off" placeholder="请输入家庭住址" class="layui-input">
            </div>
        </div>

        <div class="layui-upload">
            <button type="button" class="layui-btn" id="test2">头像图片上传</button>
            <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;">
                预览图：
                <div class="layui-upload-list" id="demo2"></div>
            </blockquote>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">图片地址</label>
            <div class="layui-input-block">
                <input type="text" name="Imageaddress" value="@Model.ImgUrl" id="Imageaddress" lay-verify="imageAddress" autocomplete="off" placeholder="图片地址" class="layui-input">
            </div>
        </div>


        <div class="layui-form-item">
            <label class="layui-form-label">个人爱好</label>
            <div class="layui-input-block">
                <select name="live" lay-filter="aihao">
                    <option value=""></option>
                    <option value="写作">写作</option>
                    <option value="阅读" selected="">阅读</option>
                    <option value="游戏">游戏</option>
                    <option value="音乐">音乐</option>
                    <option value="旅行">旅行</option>
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <div class="layui-inline">
                <label class="layui-form-label">验证问题</label>
                <div class="layui-input-inline">
                    <select name="quiz">
                        <option value="@Model.VProblem">@Model.VProblem</option>
                        <optgroup label="城市记忆">
                            <option value="你工作的第一个城市">你工作的第一个城市</option>
                            <option value="你工作的第一个城市">你的第一个工作是什么</option>
                        </optgroup>
                        <optgroup label="学生时代">
                            <option value="你的工号">你的工号</option>
                            <option value="你最喜欢的老师">你最喜欢的老师</option>
                            <option value="你喜欢的人是谁">你喜欢的人是谁</option>
                        </optgroup>
                    </select>
                </div>
            </div>
        </div>

        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label">个人简介</label>
            <div class="layui-input-block">
                <textarea name="resume" placeholder="请输入内容" class="layui-textarea">@Model.Resume</textarea>
            </div>
        </div>
        <div class="layui-form-item">
            <div class="layui-input-block">
                <input type="button" class="layui-btn layui-btn-primary" id="back" value="返回"/>
              
            </div>
        </div>
    }


    <script src="~/content/layui/layui.js"></script>
    <!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
    <script>
        layui.use(['form', 'layedit', 'laydate', 'upload'], function () {
            var form = layui.form
            var $ = layui.jquery
            , layer = layui.layer
            , layedit = layui.layedit
            , laydate = layui.laydate
            , upload = layui.upload;

            //多图片上传
            upload.render({
                elem: '#test2'
              , url: '/ashx/ImageUpLoad.ashx'
              , multiple: true
              , before: function (obj) {
                  //预读本地文件示例，不支持ie8
                  obj.preview(function (index, file, result) {
                      $('#demo2').append('<img src="' + result + '" alt="' + file.name + '" class="layui-upload-img">')
                  });
              }
              , done: function (res) {
                  //上传完毕
                  if (res.d == null) {
                      alert("上传失败");
                  } else {
                      $("#Imageaddress").val(res.d);
                      // alert(res.d);   //赢为一般处理程序中我们写的json对象  中就一个参数d所以我们需要点出来他就行了
                  }
              }
            });



        

            //自定义验证规则
            form.verify({
                title: function (value) {
                    if (value.length < 2) {
                        return '请输入正确的用户名信息';
                    }
                }
                , address: function (value) {
                    if (value.length < 8) {
                        return '请输入正确的家庭住址';
                    }
                }
              , pass: [/(.+){6,9}$/, '密码必须6到9位']
              , content: function (value) {
                  layedit.sync(editIndex);
              }
            });

           


        });
    </script>

</body>
</html>
